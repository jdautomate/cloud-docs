<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="algolia"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="0"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><title>SAML set up with Keycloak</title><link rel="stylesheet" type="text/css" href="../../../../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/theme0.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/theme0-colors.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/html5.algoliasearch.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../../../../css/layout-custom-style.css"></link><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="keywords" content="CloudConnexa formerly known as OpenVPN Cloud, CloudConnexa Administrator"></meta><link rel="prev" href="saml-set-up-with-azure-ad.html" title="SAML set up with Azure AD"></link><link rel="next" href="saml-set-up-with-okta.html" title="SAML set up with Okta"></link><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link></head><body class="theme0 page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../../"><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../../../../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="collapse" id="navbar-collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../../../../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="../../../index-en.html">Knowledge Base</a></li><li class="breadcrumb-link"><a href="../../../administrator.html"><span class="bold"><strong>Administrator</strong></span></a></li><li class="breadcrumb-link"><a href="../../authentication.html"><span class="bold"><strong>Authentication</strong></span></a></li><li class="breadcrumb-link"><a href="../saml.html"><span class="bold"><strong>SAML</strong></span></a></li><li class="breadcrumb-node"><span class="bold"><strong>SAML set up with Keycloak</strong></span></li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="saml-set-up-with-azure-ad.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="saml-set-up-with-okta.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section reused-publication" data-origin-id="UUID-3aea7123-2173-d3ef-1878-a7181c4c608e" data-permalink="administrator/authentication/saml/saml-set-up-with-keycloak.html" data-topic-level="4" data-relative-prefix="../../../" data-publication-date="" id="UUID-3aea7123-2173-d3ef-1878-a7181c4c608e"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both"><span class="bold"><strong>SAML set up with Keycloak</strong></span></h1></div></div></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-b9374152-d179-e42e-eebe-00d86f609e4b" data-publication-date="" id="UUID-1b126098-3790-0e63-250a-a3f3df7ef712"><div class="titlepage"><div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>This document provides you with the steps for configuring an CloudConnexa instance to use Keycloak as your SAML identity provider (IdP).</p></div></div></div></div><p>This document provides you with the steps for configuring a CloudConnexa instance to use Keycloak as the SAML identity provider (IdP).</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-19b6adf3-1d5b-10b7-889b-35630a52d656" data-publication-date="" id="UUID-e49a4b88-86c3-0335-1a32-c5da6f9e3905"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Retrieve certificate value and IdP endpoint from Keycloak</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Navigate to Keycloak and sign in with your Administrator account.</p><div class="mediaobject"><img src="../../../image/uuid-076942d6-4ac1-5734-9138-87895b8d2de0.png" style="" alt="62eac8433bfd4.png"></img></div></li><li class="listitem"><p>Access <span class="bold"><strong>Realm Settings</strong></span> &gt; <span class="bold"><strong>Endpoints</strong></span> and click <span class="bold"><strong>SAML 2.0 Identity Provider Metadata</strong></span>l.</p><div class="mediaobject"><table class="image-viewport" style="border-collapse:collapse;border:0;
                                width:580px;
                            "><tr><td style="padding:0;"><img src="../../../image/uuid-c9c44a5a-04c3-dbd7-ac8f-eadca6cebb65.png" style="max-width: 580px; " alt="62eac84524bf0.png"></img></td></tr></table></div></li><li class="listitem"><p>Copy the <span class="bold"><strong>IdP X.509 Public Certificate</strong></span> and the <span class="bold"><strong>IdP Authentication Endpoint URL</strong></span>, which are used later in the CloudConnexa set up process.</p></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-339e2073-8a1d-13a7-f386-2e8422a08f0d" data-publication-date="" id="UUID-a2a83abb-089a-c44c-1088-abb10db72530"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Configure and enable SAML in CloudConnexa</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Sign in to the CloudConnexa<code class="code">https://cloud.openvpn.com/</code></p></li><li class="listitem"><p>Access <span class="bold"><strong>Settings</strong></span> &gt; <span class="bold"><strong>User Authentication</strong></span> and click <span class="bold"><strong>Edit</strong></span>.</p><div class="mediaobject"><img src="../../../image/uuid-fde7e093-7d28-a59e-9aa3-eee9724eb2b1.png" style="" alt="saml_with_keycloak.png"></img></div></li><li class="listitem"><p>Click on <span class="bold"><strong>Configure</strong></span> in the <span class="bold"><strong>Authenticate Users Using &gt; SAML</strong></span> section.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The SAML Configuration window opens. Click <span class="bold"><strong>Next</strong></span>.</p><div class="mediaobject"><img src="../../../image/uuid-86f6822a-80e8-46b0-8fec-092ebaa6ac69.png" style="" alt="saml_config.png"></img></div></li></ul></div></li><li class="listitem"><p>Add your<span class="bold"><strong> IdP Name </strong></span>(optional), and then select <span class="bold"><strong>Manual Configuration</strong></span>.</p><div class="mediaobject"><img src="../../../image/uuid-a4abf2f4-31aa-9ee8-7ca8-6261f4058002.png" style="" alt="saml_config2.png"></img></div></li><li class="listitem"><p>Paste the previously copied <span class="bold"><strong>IdP Authentication Endpoint URL</strong></span> and the <span class="bold"><strong>IdP X.509 Public Certificate</strong></span>.</p><div class="mediaobject"><img src="../../../image/uuid-e34b1d01-d0c4-20da-d207-9166473a1a2f.png" style="" alt="62eac84b95b1c.png"></img></div></li><li class="listitem"><p>Click <span class="bold"><strong>Next</strong></span>, review the displayed information, then click <span class="bold"><strong>Finish</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>You now have the option to use SAML to authenticate Users.</p><div class="mediaobject"><img src="../../../image/uuid-06e7030c-bbc2-60f4-391b-feb5951f9095.png" style="" alt="saml_config3.png"></img></div></li></ul></div></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-ea6422bd-a26d-82fb-0631-c66b1decd308" data-publication-date="" id="UUID-72ee9005-c01b-0ed7-fc73-d4e455076499"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Create a new Keycloak client</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Navigate to <span class="bold"><strong>Keycloak</strong></span> and sign in as an Administrator.</p><div class="mediaobject"><img src="../../../image/uuid-a1211abe-013c-8de2-5aa4-44c176e82c6c.png" style="" alt="62eac84fb963c.png"></img></div></li><li class="listitem"><p>Access <span class="bold"><strong>Clients</strong></span> and click <span class="bold"><strong>Create</strong></span>.</p></li><li class="listitem"><p>Set the <span class="bold"><strong>Client ID</strong></span> to be the same as the Issuer Name that was displayed in the SAML configuration on the CloudConnexa portal:</p><div class="mediaobject"><img src="../../../image/uuid-393dc7e6-5c0e-e29e-34ef-47a5b98fefd8.png" style="" alt="62eac85118508.png"></img></div></li><li class="listitem"><p>Select <span class="bold"><strong>SAML</strong></span> as the <span class="bold"><strong>Client Protocol</strong></span>.</p></li><li class="listitem"><p>Enter the SSO URL for the <span class="bold"><strong>Client SAML Endpoint</strong></span>:</p><div class="mediaobject"><img src="../../../image/uuid-c161ea87-71fe-644a-a3d8-c12579fcfc79.png" style="" alt="62eac85263f42.png"></img></div></li><li class="listitem"><p>Click <span class="bold"><strong>Save</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The settings tab displays the default values.</p></li></ul></div></li><li class="listitem"><p>Enable S<span class="bold"><strong>ign Assertions</strong></span>.</p></li><li class="listitem"><p>Disable <span class="bold"><strong>Client Signature Required </strong></span>and <span class="bold"><strong>Force POST Binding</strong></span>.</p></li><li class="listitem"><p>Set the <span class="bold"><strong>Name ID</strong></span> format to <span class="bold"><strong>email</strong></span>.</p></li><li class="listitem"><p>Enter this value in <span class="bold"><strong>Valid Redirect URIs</strong></span>, which allows redirects to the ACS URL:</p><div class="itemizedlist"><div class="mediaobject"><img src="../../../image/uuid-70b86192-3349-4f04-e3b9-e0d731832986.png" style="" alt="62eac853d34d8.png"></img></div><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>All other values are left as default.</p><div class="mediaobject"><img src="../../../image/uuid-ee5f4ebd-c65f-0108-50bc-d41f87e32f7c.png" style="" alt="62eac8555407c.png"></img></div></li></ul></div></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-dd528a10-bd5b-1bb6-ab5c-138ffefd8490" data-publication-date="" id="UUID-f9e31360-ac1d-5bc2-047e-10f68387a22c"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Create a Keycloak User account</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Navigate to <span class="bold"><strong>Keycloak</strong></span>, access <span class="bold"><strong>Users</strong></span>, and click <span class="bold"><strong>Add User.</strong></span></p></li><li class="listitem"><p>Fill out the form with your data.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You can select <span class="bold"><strong>Email Verified</strong></span> if you use a test email that doesn’t allow verification.</p></div><div class="mediaobject"><img src="../../../image/uuid-2bb5b509-ebce-811f-7fa0-0dfe7b10415f.png" style="" alt="62eac85890d93.png"></img></div></li><li class="listitem"><p>Open the <span class="bold"><strong>Credentials</strong></span> tab and assign a password for the User account, and click <span class="bold"><strong>Set Password</strong></span>.</p><div class="mediaobject"><img src="../../../image/uuid-9c8b30bc-69d2-3f04-a3ac-18f5c184db9f.png" style="" alt="62eac85a1bb6f.png"></img></div></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-0c4e3eff-a6ca-e67e-5fc3-79c1223f25f2" data-publication-date="" id="UUID-c18bd7a1-1b0a-a892-5c24-d18686ed231a"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Sign in to your CloudVPN domain with Keycloak</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Navigate to the CloudConnexa account page at: <a class="link" href="https://myaccount.openvpn.com/product-select" target="_blank" rel="noopener">https://myaccount.openvpn.com/product-select</a></p></li><li class="listitem"><p>Click <span class="bold"><strong>Not an Owner? </strong></span> <a class="link" href="https://sso.openvpn-qa.com/domain/login" target="_blank" rel="noopener"><span class="bold"><strong>Sign In Here</strong></span></a>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>CloudConnexa recognizes that your domain uses SAML and displays the <span class="bold"><strong>Single Sign On</strong></span> prompt.</p><div class="mediaobject"><img src="../../../image/uuid-a4277d8f-0327-0cca-8e9f-236e28dde0e5.png" style="" alt="62eac85bef1d1.png"></img></div></li></ul></div></li></ol></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Click <span class="bold"><strong>Sign In</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Keycloak Log In page opens.</p></li></ul></div></li><li class="listitem"><p>Enter the Keycloak test account email and password and click <span class="bold"><strong>Log In</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The CloudConnexa Get Connected page opens with app download and installation instructions.</p><div class="mediaobject"><img src="../../../image/uuid-e5be7db3-b201-1344-c319-4060f91be76b.png" style="" alt="62eac85d5587d.png"></img></div><div class="mediaobject"><img src="../../../image/uuid-34d3eafb-7415-f23a-734a-da78dcf4cac3.png" style="" alt="62eac85f0aed1.png"></img></div></li></ul></div></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-de1ec389-e326-3951-c8bb-8c1e5f859b46" data-publication-date="" id="UUID-b5a5534c-2a9e-534b-37e5-0b95abc50b1a"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Configure attributes and group mapping in Keycloak</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Navigate to Keycloak, access <span class="bold"><strong>Clients</strong></span>, and click on your Client ID.</p></li><li class="listitem"><p>Click on the <span class="bold"><strong>Mappers</strong></span> tab, which allows you to create SAML attributes.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>At the time of publication, CloudConnexa only supports First Name, Last Name, Email, and Groups for mapping attributes.</p></div></li><li class="listitem"><p>Click <span class="bold"><strong>Create</strong></span>, and in <span class="bold"><strong>Mapper Type</strong></span> select <span class="bold"><strong>User Property.</strong></span></p></li><li class="listitem"><p>Add a separate attribute entry for each of First Name, Last Name, and Email.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You must use these defined Property name values in the <span class="bold"><strong>Property</strong></span> field.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><tbody><tr><td class="td"><p><span class="bold"><strong>Attribute</strong></span></p></td><td class="td"><p><span class="bold"><strong>Property</strong></span></p></td><td class="td"><p><span class="bold"><strong>Purpose</strong></span></p></td></tr><tr><td class="td"><p>Email</p></td><td class="td"><p>email</p></td><td class="td"><p>To pass the email value to the service provider.</p></td></tr><tr><td class="td"><p>First Name</p></td><td class="td"><p>firstName</p></td><td class="td"><p>To pass the first name value to the service provider.</p></td></tr><tr><td class="td"><p>Last Name</p></td><td class="td"><p>lastName</p></td><td class="td"><p>To pass the last name value to the service provider.</p></td></tr></tbody></table></div></div></li><li class="listitem"><p>Set the <span class="bold"><strong>SAML Attribute Name</strong></span> value to be the same as each corresponding Property name value.</p></li><li class="listitem"><p>Click <span class="bold"><strong>Create</strong></span>, and in <span class="bold"><strong>Mapper Type</strong></span> select <span class="bold"><strong>Group List</strong></span> to create a Group Mapper.</p></li></ol></div><div dir="ltr" class="note"><h3 class="title">Note</h3><p>You must use <span class="bold"><strong>groups</strong></span> as the defined <span class="bold"><strong>Group attribute name</strong></span>.</p></div><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><tbody><tr><td class="td"><p><span class="bold"><strong>Attribute</strong></span></p></td><td class="td"><p><span class="bold"><strong>Group attribute name</strong></span></p></td><td class="td"><p><span class="bold"><strong>Purpose</strong></span></p></td></tr><tr><td class="td"><p>Group</p></td><td class="td"><p>groups</p></td><td class="td"><p>To pass the groups value to the service provider.</p></td></tr></tbody></table></div><div class="mediaobject"><img src="../../../image/uuid-607b91a3-cff0-c72b-322b-67f435d10ac1.png" style="" alt="62eac86100e09.png"></img></div><div class="mediaobject"><img src="../../../image/uuid-4c31d78f-32d0-dacf-4632-ac2c15747008.png" style="" alt="62eac8629f97b.png"></img></div><div class="mediaobject"><img src="../../../image/uuid-53db07b8-b633-a1da-c5bb-738d24db2040.png" style="" alt="62eac8644d36a.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-02215160-a0bb-f404-00e0-0719d029decb" data-publication-date="" id="UUID-33fe5633-26f3-3867-a517-c7d1f1948e34"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Configure attribute mapping in </strong></span>CloudConnexa</h2></div></div></div><p>To finalize your attribute mapping set up, you must ensure that the <span class="bold"><strong>Property</strong></span> values and <span class="bold"><strong>SAML Attribute</strong></span> values match the <span class="bold"><strong>Attribute Mapping</strong></span> values in your SAML Configuration on CloudConnexa.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Access <span class="bold"><strong>CloudConnexa</strong></span> &gt; <span class="bold"><strong>Settings</strong></span> &gt; <span class="bold"><strong>User Authentication</strong></span> &gt; <span class="bold"><strong>SAML</strong></span> &gt; <span class="bold"><strong>View Attirbute Mapping</strong></span> to check that those values match :</p></li></ol></div><div class="mediaobject"><img src="../../../image/uuid-46cc6c39-5005-ba0d-49fd-24d2cb62472e.png" style="" alt="62eac866528ae.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-adee19e4-dcd0-7c33-b0ff-541669397694" data-publication-date="" id="UUID-3c8f0b6d-0083-cde5-5a00-cfd0981f1b0e"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Set up group mapping in CloudConnexa</strong></span></h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Access CloudConnexa <span class="bold"><strong>Settings</strong></span> &gt; <span class="bold"><strong>User Authentication</strong></span> &gt; <span class="bold"><strong>SAML</strong></span> &gt; <span class="bold"><strong>View Group Mapping</strong></span> and click <span class="bold"><strong>Add Rule</strong></span>.</p></li><li class="listitem"><p>Enter the name of the group(s) from your identity provider under <span class="bold"><strong>SAML IdP User Group(s)</strong></span> and then select a group from the <span class="bold"><strong>CloudConnexa User Groups</strong></span> that you want to map to your IdP group(s).</p></li></ol></div><div class="mediaobject"><img src="../../../image/uuid-f4d372c5-6df2-ce6f-1433-324e6efbad3c.png" style="" alt="62eac868e98bc.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-95f8d6d4-e900-db66-cb71-7f6ecaa7575b" data-publication-date="" id="UUID-11e16418-6aa8-7fb4-8c05-d6c1b7b25238"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Steps: Set up identity provider initiated flow</strong></span></h2></div></div></div><p>There are two ways to enable SAML authentication to an application: service provider initiated flow (<span class="bold"><strong>SP-initiated</strong></span>) and identity provider initiated flow (<span class="bold"><strong>IdP-initiated</strong></span>). The SP-initiated flow is considered more secure.</p><p>For the SP-initiated flow, a User navigates to a tenant URL that leads them to a SAML login page. During the IdP-initiated flow, a User opens their account on the IdP portal and they sign in to any of their assigned apps from that portal. Open WPC doesn’t support the classic IdP-initiated flow out of the box because of the lack of security. However, we do provide a workaround for those Administrators who use IdP-initiated SAML authentication.</p><p>In brief, we need to retrieve the <span class="bold"><strong>RelayState</strong></span> value from the SAML request/response and paste this value into the corresponding field on the IdP.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Sign in to the app using SP-initiated flow through the direct Open WPC ID URL e.g. <a class="link" href="https://keycloak-saml.openvpn-qa.com" target="_blank" rel="noopener">https://keycloak-saml.openvpn-qa.com</a> with opened <span class="bold"><strong>SAML extension</strong></span> (extension that can be downloaded from Chrome Web Store <a class="link" href="https://chrome.google.com/webstore/detail/saml-devtools-extension/jndllhgbinhiiddokbeoeepbppdnhhio?hl=en-US" target="_blank" rel="noopener">https://chrome.google.com/webstore/detail/saml-devtools-extension/jndllhgbinhiiddokbeoeepbppdnhhio?hl=en-US</a>).</p></li><li class="listitem"><p>Find the SAML response or request (that is highlighted with <span class="emphasis"><em>green</em></span> color in the extension) it doesn`t matter response or request cause needed <span class="bold"><strong>RelayState</strong></span> value we can extract from both operations.</p></li><li class="listitem"><p>Click on the response/request and on the <span class="bold"><strong>Request</strong></span> tab find and copy value called <span class="bold"><strong>RelayState</strong></span> (see the screenshot below).</p><div class="mediaobject"><img src="../../../image/uuid-07f5f629-8f56-ea99-d7e0-3e3f94230aba.png" style="" alt="62eac86b55db7.png"></img></div></li><li class="listitem"><p>Paste this value into <a class="link" href="https://www.urldecoder.org/" target="_blank" rel="noopener">https://www.urldecoder.org/</a> and decode.</p></li><li class="listitem"><p>Copy the decoded value and paste it in the <span class="bold"><strong>IdP Initiated SSO RelayState</strong></span> field on the IdP side(see the screenshot below). Save configuration.</p><div class="mediaobject"><img src="../../../image/uuid-7296f9b8-dc6c-34b1-bba8-87f4ac474e1a.png" style="" alt="62eac86d54244.png"></img></div></li><li class="listitem"><p>After some time the changes will take effect on IdP side and Users can sign in using the IdP-initiated flow.</p></li></ol></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-3aea7123-2173-d3ef-1878-a7181c4c608e">SAML set up with Keycloak</a></li><li><a href="#UUID-1b126098-3790-0e63-250a-a3f3df7ef712">Abstract</a></li><li><a href="#UUID-e49a4b88-86c3-0335-1a32-c5da6f9e3905">Steps: Retrieve certificate value and IdP endpoint from Keycloak</a></li><li><a href="#UUID-a2a83abb-089a-c44c-1088-abb10db72530">Steps: Configure and enable SAML in CloudConnexa</a></li><li><a href="#UUID-72ee9005-c01b-0ed7-fc73-d4e455076499">Steps: Create a new Keycloak client</a></li><li><a href="#UUID-f9e31360-ac1d-5bc2-047e-10f68387a22c">Steps: Create a Keycloak User account</a></li><li><a href="#UUID-c18bd7a1-1b0a-a892-5c24-d18686ed231a">Steps: Sign in to your CloudVPN domain with Keycloak</a></li><li><a href="#UUID-b5a5534c-2a9e-534b-37e5-0b95abc50b1a">Steps: Configure attributes and group mapping in Keycloak</a></li><li><a href="#UUID-33fe5633-26f3-3867-a517-c7d1f1948e34">Steps: Configure attribute mapping in CloudConnexa</a></li><li><a href="#UUID-3c8f0b6d-0083-cde5-5a00-cfd0981f1b0e">Steps: Set up group mapping in CloudConnexa</a></li><li><a href="#UUID-11e16418-6aa8-7fb4-8c05-d6c1b7b25238">Steps: Set up identity provider initiated flow</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="saml-set-up-with-azure-ad.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="saml-set-up-with-okta.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023  </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><script type="text/javascript">
var theme = '0';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><script src="../../../../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../../../../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../../../../js/materialize.min.js" type="text/javascript"></script><script src="../../../../js/bootstrap.min.js" type="text/javascript"></script><script src="../../../../js/purl.js" type="text/javascript"></script><script src="../../../../js/jquery.smartmenus.js" type="text/javascript"></script><script src="../../../js/toc.js" type="text/javascript"></script><script src="../../../../js/create-toc.js" type="text/javascript"></script><script src="../../../../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../../../../js/html5-2.js" type="text/javascript"></script><script src="../../../../js/checklist.js" type="text/javascript"></script><script src="../../../../js/clipboard.min.js" type="text/javascript"></script><script src="../../../../js/anchorlinks.js" type="text/javascript"></script><script src="../../../../js/html5.algoliasearch.js" type="text/javascript"></script><script src="../../../../js/csh.js" type="text/javascript"></script><script src="../../../../js/layout-custom-script.js" type="text/javascript"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script type="text/javascript">const containerId = 'GTM-W3DL2JV';

						$(document).on('cookies.consented', () => {
							(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
								new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
								j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
								'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
							})(window,document,'script','dataLayer',containerId);
						});
					</script><script type="text/javascript" src="../../../../js/cookie-consent.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><script type="text/javascript">var publication_id = 'docs_index';
var algolia_application_id = 'RSWCYN6WCZ';
var algolia_search_only_api_key = '62cb66cce7985fc867c172fa2d12bc1c';
</script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W3DL2JV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
