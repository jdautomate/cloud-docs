<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="algolia"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="0"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><title>User Guide - Configuring a WPC that meets a variety of needs</title><link rel="stylesheet" type="text/css" href="/cloud-docs/css/docbook.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/theme0.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/theme0-colors.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-print.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-common.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/html5.algoliasearch.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/layout-custom-style.css"></link><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="keywords" content="CloudConnexa formerly known as OpenVPN Cloud, Second keyword"></meta><link rel="prev" href="wide-area-private-cloud--wpc-.html" title="Wide-area Private Cloud (WPC)"></link><link rel="next" href="split-tunnel.html" title="Split-Tunnel"></link><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link></head><body class="theme0 page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../../"><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="/cloud-docs/css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="collapse" id="navbar-collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="/cloud-docs/css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="../../../index-en.html">Knowledge Base</a></li><li class="breadcrumb-link"><a href="../../../owner.html"><span class="bold"><strong>Owner</strong></span></a></li><li class="breadcrumb-link"><a href="../../wide-area-private-cloud.html"><span class="bold"><strong>Wide-area Private Cloud</strong></span></a></li><li class="breadcrumb-link"><a href="../wpc.html"><span class="bold"><strong>WPC</strong></span></a></li><li class="breadcrumb-node"><span class="bold"><strong>User Guide - Configuring a WPC that meets a variety of needs</strong></span></li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="wide-area-private-cloud--wpc-.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="split-tunnel.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section reused-publication" data-origin-id="UUID-0804849f-9647-906b-660a-29be1762517f" data-permalink="owner/wide-area-private-cloud/wpc/user-guide---configuring-a-wpc-that-meets-a-variety-of-needs.html" data-topic-level="4" data-relative-prefix="../../../" data-publication-date="" id="UUID-0804849f-9647-906b-660a-29be1762517f"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both"><span class="bold"><strong>User Guide - Configuring a WPC that meets a variety of needs</strong></span></h1></div></div></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-06bc7cb3-9d31-1874-5f2b-eda37f4690c0" data-publication-date="" id="UUID-4a3f0375-ff00-26c4-be6f-4846650d270c"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Overview</strong></span></h2></div></div></div><p>In this document, we examine a WPC set up to meet the needs of a fictitious company. In doing so, we aim to cover the use and configuration of CloudConnexa to meet the most common WPC scenarios. We will be building the WPC in phases. This allows us to cover various WPC setups using one example and progressively build in complexity while reducing the repetition of configuration steps.</p><p>A business has headquarters located in California, USA, a branch office in Massachusetts, USA, and another branch in the United Kingdom. Owen is in charge of IT and Networking for this company. Owen is looking for a WPC solution that does not require him to manage, install and maintain WPC servers and allows him to create a hosted WPC that can be accessed from regional locations worldwide.</p><p>Owen is aware that such a service is provided by CloudConnexa Inc and signs up to use CloudConnexa.</p><p>Owen completes the signup process as shown <a class="link" href="https://openvpn.net/cloud-docs/owner-signup/" target="_blank" rel="noopener">here</a>. During the signup process, Owen selects <code class="code">technop.openvpn.cloud </code>as the web domain for the User portal. This domain uniquely identifies the WPC that will be set up by Owen and is used by Connect Client applications (WPC Client software) to identify the WPC that it needs to connect to.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-08b01d94-3f0c-a78f-bac3-85e90acc34bd" data-publication-date="" id="UUID-9178e675-d391-c440-0063-351f23e8e3c7"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Site-to-Site Networking</strong></span></h2></div></div></div><p>Owen’s first goal is to establish Site-to-Site networking between the private Networks in each office location. He wants Full-Mesh connectivity such that each location can communicate with the other two locations. Owen plans the connectivity using the table below:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><thead><tr><th class="th"><p>Site Type</p></th><th class="th"><p>Site Location</p></th><th class="th"><p>closest CloudConnexa Region</p></th><th class="th"><p>Network Name</p></th><th class="th"><p>Subnets to associate with the Network</p></th><th class="th"><p>Route for public Internet traffic generated from this Network</p></th></tr><tr><th class="th"><p>HQ Building</p></th><td class="td"><p>CA, USA</p></td><td class="td"><p>San Jose, CA</p></td><td class="td"><p>HQNetCA</p></td><td class="td"><p>10.1.0.0/17</p></td><td class="td"><p>use local exit point do not enter CloudConnexa WPC</p></td></tr></thead><tbody><tr><th class="th tableheader"><p>Branch office</p></th><td class="td"><p>MA, USA</p></td><td class="td"><p>Ashburn, VA</p></td><td class="td"><p>BranchNetMA</p></td><td class="td"><p>10.2.0.0/20</p></td><td class="td"><p>use local exit point do not enter CloudConnexa WPC</p></td></tr><tr><th class="th tableheader"><p>Branch office</p></th><td class="td"><p>UK</p></td><td class="td"><p>London, UK</p></td><td class="td"><p>BranchNetUK</p></td><td class="td"><p>10.3.0.0/20</p></td><td class="td"><p>use local exit point do not enter CloudConnexa WPC</p></td></tr></tbody></table></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-423c9764-a9ec-e2f1-c0cd-c28b0af35c73.png" style="" alt="62ed4964b3082.png"></img></div><p>Once the planning is done, Owen gets to implementation by following these steps:</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-4acdcad7-5fda-715c-2e8e-4e620800584e" data-publication-date="" id="UUID-8ff4a8db-5e54-2f89-3a38-7a8e5cdc3750"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Sign in to the CloudConnexa Administration portal and configure the HQ Network</strong></span></h2></div></div></div><p>Owen uses the guide shown <a class="link" href="https://openvpn.net/cloud-docs/adding-a-network/" target="_blank" rel="noopener">here</a> to configure the first Network. Multiple Network Subnets can be configured for the same Network.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-eef6e5dd-f294-dca9-fcfa-797bcf214b90.jpg" style="" alt="62ed4966afede.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-50eda7de-7055-cbe7-0f48-9928a23e8abe" data-publication-date="" id="UUID-5e291615-089b-a05c-33fa-76c2bd53fb25"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Setup the other two Networks</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-be521999-afec-c1df-8aea-e2b003ae1c63.png" style="" alt="62ed49680148c.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-f988aa89-108d-b4db-cd24-c0adfd1f1c9f" data-publication-date="" id="UUID-3f017344-9cde-4a52-c2e1-3a8665cfb0c1"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Check that access is set to Full-Mesh</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-7a581fb4-3d35-1fe6-94de-0cfab8f0da44.png" style="" alt="62ed4969b2b5d.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-7d11b80c-e39e-d465-b55d-a9687ab8314c" data-publication-date="" id="UUID-b5c7ee2b-44c7-c694-b1d3-318f479a4d92"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Install Connector software and connect to CloudConnexa</strong></span></h2></div></div></div><p>A guide to installing the CloudConnexa client and connecting to CloudConnexa is shown at: <a class="link" href="https://openvpn.net/cloud-docs/installing-network-connector-linux/" target="_blank" rel="noopener">Installing Network Connector – Linux</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-7765f88e-754a-56d6-617c-1da01dad5357" data-publication-date="" id="UUID-c460a51c-1f5e-6efc-6b5e-0937ec6ad905"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Configure the Network routes at each of the sites</strong></span></h2></div></div></div><p>IP forwarding is the ability for an operating system to accept incoming Network packets on one interface, recognize that it is not meant for the system itself, but that it should be passed on to another Network, and then forwards it accordingly. This is what you need when you have for example a system set up that is sitting between two different Networks and needs to pass traffic between them. On pretty much any Linux system, barring a few exceptions, this can be accomplished by editing the <span class="bold"><strong>/etc/sysctl.conf</strong></span> file and adding or uncommenting a specific line. To enable IP forwarding on Ubuntu/Debian, for example, see, <a class="link" href="https://openvpn.net/cloud-docs/nat-configuration-for-internet-gateway-linux/" target="_blank" rel="noopener">Enable IPv4 forwarding</a>. Check IPv6 forwarding as well if needed : <a class="link" href="https://wiki.gentoo.org/wiki/IPv6_router_guide" target="_blank" rel="noopener">https://wiki.gentoo.org/wiki/IPv6_router_guide</a>.</p><p>The alterations you’ve made to the <span class="bold"><strong>sysctl.conf</strong></span> file should now have taken effect and IP forwarding should now be enabled permanently on this system.</p><p>Now there is only one thing left to configure. The router in the Network where the Connector is installed needs to be made aware that it can reach the other two Networks, and that they can be reached by contacting the private IP address of the Connector. While the configuration shown below addresses the HQ Network, routes need to be added to both the branch Networks too.</p><p>In our example Network, the computer that has the Connector installed on it at HQ has an IP of <span class="bold"><strong>10.1.60.55</strong></span>. To make the router aware that BranchNetMA and BranchNetUK subnets can be reached via the Connector, look up the documentation of your router Device, and look up how to add static routes. Please note that you should add these static routes on the router present in the HQ. These are the static routes that need to be added:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Network <code class="code">10.3.0.0</code> with <a class="link" href="https://openvpn.net/vpn-server-resources/subnet-mask-cheat-sheet/" target="_blank" rel="noopener">subnet mask</a> <code class="code">255.255.240.0</code> through gateway <code class="code">10.1.60.55</code></p></li><li class="listitem"><p>Network <code class="code">10.2.0.0</code> with subnet mask <code class="code">255.255.240.0</code> through gateway <code class="code">10.1.60.55</code></p></li></ul></div><p>With the new static routes in place, whenever traffic now arrives at the router that has as a destination an IP address somewhere in <span class="bold"><strong>10.3.0.0/20</strong></span> or <span class="bold"><strong>10.2.0.0/20</strong></span>, it will know that it should forward this to the CloudConnexa Connector at IP address<span class="bold"><strong>10.1.60.55</strong></span>. CloudConnexa will then route it to the correct site.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-090bd9bc-b23c-ad49-091a-ae681a729cab" data-publication-date="" id="UUID-de6449fb-f801-9799-a6df-84f2489b0e25"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Remote Workers / Telecommuting</strong></span></h2></div></div></div><p>The business has hired two people with specialized skills and allowed them to work remotely. Harry and Mary will be working out of their home offices and need to access the corporate Network. Owen decides to make them part of the Full-Mesh WPC by setting them up as CloudConnexa Users. All CloudConnexa Users if not assigned to a specific group, belong to the Default Group. The Full-Mesh access configuration allows these Users to access all of the WPC even other User’s Devices.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-ae0dd533-7ecc-6521-6524-18f07b1686c1.png" style="" alt="62ed496b78512.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-a50fd8e1-bd2c-8a1f-18eb-e1b55a7d5c76" data-publication-date="" id="UUID-c357d6aa-24c6-f4eb-8369-8af95c0a30dd"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Check and edit the Default User Group settings</strong></span></h2></div></div></div><p>Owen checks whether the Default Group setting meets his needs. As he wants all Users to authenticate with username and password, he edits the Authentication Type to ‘Profile and password’. Owen refers to <a class="link" href="https://openvpn.net/cloud-docs/editing-default-user-group-settings/" target="_blank" rel="noopener">Editing Default User Group settings</a> for set up.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-8c6654a4-3bce-3f78-4343-aaf3cbf0db14" data-publication-date="" id="UUID-ef157330-5cec-f7aa-58c8-118cdaa59417"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Choose the means of Profile distribution</strong></span></h2></div></div></div><p>Owen wants the employees to receive their profiles automatically once they take steps to add their Profile into the Connect Client and authenticate via their CloudConnexa credentials. He would have chosen the manual mode if delivering the Profile to the employee was being handled by the employee onboarding portal, a Device management system, or by other offline means.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-5574db33-1227-561e-ef01-212a09dbd620.png" style="" alt="62ed496d6b698.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-ef6a3312-1847-6c78-26cf-b29dd0d27626" data-publication-date="" id="UUID-71e86295-580d-e7de-fb97-04a15429ae21"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Add Users Harry and Mary</strong></span></h2></div></div></div><p>There are two ways that Owen can choose to invite Harry and Mary to be Users of the WPC:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Let CloudConnexa send an invitation to the User’s email and activate the User’s account when the User clicks on the invitation link. For this to happen, the User email must be supplied while adding the User.</p></li><li class="listitem"><p>The Administrator can provide the User portal link, username, and temporary password to the User via other means. For this to happen, the User email must NOT be supplied while adding the User.</p></li></ol></div><p>Owen uses <a class="link" href="https://openvpn.net/cloud-docs/adding-a-user/" target="_blank" rel="noopener">Adding a User</a> as a guide to adding Harry with his email address. The alternative of using the temporary password is shown in <a class="link" href="https://openvpn.net/cloud-docs/admin-sends-instructions-with-temporary-password-to-new-user/" target="_blank" rel="noopener">Admin sends instructions with temporary password to new User</a>. On receiving the credential and User portal link, the User can either <a class="link" href="https://openvpn.net/cloud-docs/user-account-activation-with-temporary-password/" target="_blank" rel="noopener">User Account activation with temporary password</a> to access the User portal or directly import the Profile using Connect Client <a class="link" href="https://openvpn.net/cloud-docs/user-account-activation-with-temporary-password-using-connect-client/" target="_blank" rel="noopener">User Account activation with temporary password using Connect Client</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d04bf038-7f91-ade2-9a99-c0fb81a49e5e" data-publication-date="" id="UUID-84c1f843-abd7-eefd-9b3c-57e06d114adf"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>User Harry joins CloudConnexa</strong></span></h2></div></div></div><p>Harry receives the invitation email, activates his account, and downloads the Connect Client application for his Device. See, <a class="link" href="https://openvpn.net/cloud-docs/user-account-activation/" target="_blank" rel="noopener">User Account Activation</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-4fe9f9a5-e5ae-6487-2fa0-8bae6ce098c6" data-publication-date="" id="UUID-37061586-99af-79f6-eb97-976f1723d629"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>User Harry gets Profile and connects</strong></span></h2></div></div></div><p>Harry can now get the Profile and connect to one of the allowed Regions for the group Default. Notice that Frankfurt is not on the list because Default group was not allowed to connect to Frankfurt. See, <a class="link" href="https://openvpn.net/cloud-docs/user-downloading-app-getting-profile-and-connecting/" target="_blank" rel="noopener">User downloading app, getting profile and connecting</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-4ca64627-8075-5362-ea42-481285e1970e" data-publication-date="" id="UUID-e670eb64-a396-b8a4-e856-6af7e9072a67"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Owen Checks that Harry has got his Profile</strong></span></h2></div></div></div><p>Check that Harry’s Status is now ‘Active’ and a Device is present. See, <a class="link" href="https://openvpn.net/cloud-docs/check-user-and-devices/" target="_blank" rel="noopener">Check User and Devices</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-945f7162-5245-9634-159d-b4010c572c40" data-publication-date="" id="UUID-211a17df-4692-fffb-91af-c5163d41bec4"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Internet Security and Policies</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-da6edfd3-e301-8063-3df9-7fa66f9f5ceb.png" style="" alt="62ed496fbd685.png"></img></div><p>The IT Security department have started using various Network Threat Management tools such as Intrusion Detection and Protection systems, and malware scanning, among others. Owen wants to direct all public traffic from the branch Networks and any telecommuters to the HQ Networks. The HQ Networks will serve as the Internet exit point for the WPC so that the Internet security policies implemented at HQ is enforced and the security appliances don’t need to be installed in the branch locations. In order to do this, Owen carries out these steps:</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-bbec4330-fa70-eeb8-a433-32d1896f155f" data-publication-date="" id="UUID-1b178ca6-e518-9138-f0e1-93982319dddb"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Add an Internet Gateway to the HQ Networks</strong></span></h2></div></div></div><p>See, <a class="link" href="http://Adding Internet Gateway" target="_blank" rel="noopener">Adding Internet Gateway</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-c18d7c4e-ef5c-f18d-be68-02c582de7143" data-publication-date="" id="UUID-b98a5169-002e-454a-ae71-d54e2a51fdff"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Configure the computer with the Connector as an Internet Gateway</strong></span></h2></div></div></div><p>See, <a class="link" href="https://openvpn.net/cloud-docs/nat-configuration-for-internet-gateway-linux/" target="_blank" rel="noopener">NAT Configuration for Internet Gateway – Linux</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d1ad5d0c-bf56-199f-da76-ccae9b80293f" data-publication-date="" id="UUID-e4c37881-2f78-7804-a07e-9a5e95c81f2b"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Make changes to Internet Access for Networks</strong></span></h2></div></div></div><p>Using <a class="link" href="https://openvpn.net/cloud-docs/changing-a-networks-internet-access-to-use-internet-gateway/" target="_blank" rel="noopener">Changing a Network’s Internet Access to use Internet Gateway</a> as a guide, Owen changes the Internet Access setting of BranchNetMA and BranchNetUK to use HQNetCA for Internet Access. Now the WPC is ready to accept public traffic from both Networks and route it over to HQNetCA for connectivity to the Internet.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-3a9e8814-7f2f-daf6-9819-788e166a7c4d.png" style="" alt="62ed49720dd83.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-afef774e-d9fd-2e34-064e-321c87f7d7dc" data-publication-date="" id="UUID-a916abe5-7313-b446-ec04-d22253bad46d"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Add Default Routes at the Branch Networks</strong></span></h2></div></div></div><p>Owen configures the routers at both branch sites to remove the static routes put in earlier (see, <a class="link" href="https://openvpn.net/cloud-docs/user-guide/" target="_blank" rel="noopener">static routes</a> ) and use the computer with the Connector software as the default route for the private Network.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-95161459-6228-06e1-0c0d-368ccf81ff5a" data-publication-date="" id="UUID-d359ef5d-d559-bef2-e7cf-4cddc7494e9c"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Make changes to Internet Access for User Groups</strong></span></h2></div></div></div><p>To route the Internet traffic from WPC connected Users over to HQNetCA, the Groups need their Internet Access changes from Local to HQNetCA. Owen follows the guide<a class="link" href="https://openvpn.net/cloud-docs/changing-user-groups-internet-access-to-use-internet-gateway/" target="_blank" rel="noopener"> Changing User Group’s Internet Access to use Internet Gateway</a> to set both the Owner and Default Groups to use HQNetCA for Internet Access.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-87a3a133-36bb-6def-049e-39726ec21f58.png" style="" alt="62ed497437771.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-5ff545f7-b8c9-c4f7-9f51-53e74064fa49" data-publication-date="" id="UUID-6e1baa7c-2f91-4692-31db-c33df84cca98"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>SaaS Whitelisting</strong></span></h2></div></div></div><p>Many SaaS providers offer a means to prevent unauthorized logins by letting their customers configure an IP address range to whitelist. Once configured, Login requests originating only from this whitelisted IP address range are allowed. Owen wants to put this additional security check in place for the SaaS tools used by his company. With telecommuters also needing access to these tools, it is hard to define an IP address range because their public IP address will change based on whether they work from home, cafe, or some other Internet access point. Owen does not need to work about these changing IP addresses because he has configured the Groups Internet Acces to use the HQNetCA Network (see, <a class="link" href="https://openvpn.net/cloud-docs/changing-user-groups-internet-access-to-use-internet-gateway/" target="_blank" rel="noopener">Changing User Group’s Internet Access to use Internet Gateway</a>). Therefore, the traffic reaching the SaaS tools always have public IP address the same as the public IP address of HQNetCA even for telecommuters.</p><p>Owen can now configure the public IP address range of HQNetCA as the whitelist IP address range for SaaS. For example, <a class="link" href="https://help.salesforce.com/articleView?id=mc_overview_ip_whitelist.htm&amp;type=5" target="_blank" rel="noopener">https://help.salesforce.com/articleView?id=mc_overview_ip_whitelist.htm&amp;type=5</a></p><div class="mediaobject"><img src="/cloud-docs/image/uuid-d56e7c8b-bc53-8112-c333-d89f0fcaa202.png" style="" alt="62ed4975e764f.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-76f53839-5cc0-ae96-6530-9b677647c4ae" data-publication-date="" id="UUID-ea93b139-7a5e-2cf7-664e-400e0508b2d9"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Access Controls</strong></span></h2></div></div></div><p>CloudConnexa allows the configuration of strict access controls. Controls can be put in place that will restrict access from Networks, Hosts, and User Groups to fine-grained services defined under Networks and Hosts. The sections below illustrate some of the ways access controls can be used.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-6de8efb4-5623-6732-d299-855bbb66d44a" data-publication-date="" id="UUID-edd454a5-8d5b-7d2b-e266-7170f73f4b62"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Inter-site Access Controls</strong></span></h2></div></div></div><p>While Owen has networked together the private Networks of HQ and the two branches, he knows that there is only a specific subnet in each location that houses services that need to be accessible from other sites and by telecommuters. Owen decides to constrain access to only those subnets between the sites.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-683a7468-22a5-f3d9-c542-02ca58cbef69.png" style="" alt="62ed4977b3bff.png"></img></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-61e412a4-f25f-7591-4bc6-e180d34a1456" data-publication-date="" id="UUID-6b5c6fb3-a4f9-a1b5-2f1b-59a015b5bdbd"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Configures services for all three Networks</strong></span></h3></div></div></div><p>Using <a class="link" href="https://openvpn.net/cloud-docs/configuring-a-subnet-as-a-service/" target="_blank" rel="noopener">Configuring a Subnet as a Service</a> as a guide, Owen creates subnet of HQ services that all branches and telecommuters need access to. He creates a service SharedHQServices for subnet <code class="code">10.1.10.0 /24</code> in HQNetCA, SharedBrMAServices for subnet <code class="code">10.2.10.0/25</code> in BranchNetMA, and SharedBrUKServices for subnet <code class="code">10.3.10.0/25</code>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-e000e940-b2d6-d3bd-8d11-c6d33cf4cf75" data-publication-date="" id="UUID-299fb20d-69ee-091b-f7fe-96854079b3fa"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Add Access Control Group</strong></span></h3></div></div></div><p>Using <a class="link" href="https://openvpn.net/cloud-docs/add-access-group/" target="_blank" rel="noopener">Add Access Group</a> as a guide, Owen creates an Access Group that provides access from All User Groups and All Networks to the Shared Services subnet created in each Network.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1491a518-2961-1967-415d-b80d3e61bcc9" data-publication-date="" id="UUID-e0100cfa-3a74-c011-9eed-6980a0423778"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Switch to use of Custom WPC Topology</strong></span></h3></div></div></div><p>Access Groups and Services are only applicable when the WPC is not in Full-Mesh mode. Owen switches the WPC topology to using Custom as shown in <a class="link" href="https://openvpn.net/cloud-docs/changing-vpn-topology-from-full-mesh-to-custom/" target="_blank" rel="noopener">Changing VPN topology from Full-Mesh to Custom</a>.</p><p>Now that the access controls are active, employees at the various location and while telecommuting have full access to services as long as the services are from the Shared Services subnet any attempt to access IP addresses outside of those subnets is blocked by CloudConnexa.</p></section></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-843950fc-f5d0-3567-88d7-45bc21224d2d" data-publication-date="" id="UUID-a1b3d3f1-3436-fa11-8a74-83b5b393d9a7"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>User Group Application Access Controls</strong></span></h2></div></div></div><p>Owen wants to further tighten the security when employees are telecommuting. Instead of giving them access to the complete subnet housing shared services at all the locations, he wants to provide them with web access (protocols: HTTP and HTTPS) to that subnet and only to the subnet at the location that they normally work out of.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-8cd46d7f-7664-6a91-691f-697494e197db.png" style="" alt="62ed497a33c9a.png"></img></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d70cfbbc-f368-97f4-dd0d-ffd736a3075e" data-publication-date="" id="UUID-0e2db80d-2ca5-4f64-b1e6-bee355aeeef6"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Create New web-specific Service</strong></span></h3></div></div></div><p>Using <a class="link" href="https://openvpn.net/cloud-docs/protocol-specific-service/" target="_blank" rel="noopener">Protocol-specific Service</a> as a guide, Owen creates web-specific services in each of the Networks</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-58900235-c528-6b04-d1be-63f51fbcfd95" data-publication-date="" id="UUID-9c20f228-7a5b-8a7f-4b1e-fff8ce6c7843"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Create new User Groups</strong></span></h3></div></div></div><p>Owen creates a User Group for each location: HqEmp, BrMAEmp, BrUKEmp. He uses <a class="link" href="https://openvpn.net/cloud-docs/add-new-user-group/" target="_blank" rel="noopener">Add New User Group</a> as a guide. When he is done, the Groups screen looks like the one below.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-aaf960d7-e87e-7d40-159d-a1aa9d7c88b0.png" style="" alt="62ed497c3b771.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-b70295ad-1bc9-6a58-b256-6ddb3e1c0cfe" data-publication-date="" id="UUID-551c33b1-6195-2169-5cc6-b590614fec3a"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Assign Users to appropriate Groups</strong></span></h3></div></div></div><p>Owen changes the Group from Default to the correct User Group based on each User’s work location. See, <a class="link" href="https://openvpn.net/cloud-docs/assign-a-user-to-a-different-group/" target="_blank" rel="noopener">Assign a User to a Different Group</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-73a2950e-0f39-fa41-66ec-e05f56132ce6" data-publication-date="" id="UUID-66bd146e-6887-ccc9-142c-012291bbbbb3"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Alter existing Access Groups</strong></span></h3></div></div></div><p>The existing <span class="bold"><strong>Access Group</strong></span> provided All Groups access to the full shared services subnets in all locations. This <span class="bold"><strong>Access Group</strong></span> needs to be edited in order to remove <span class="bold"><strong>User Groups</strong></span> from that rule and let it pertain just to <span class="bold"><strong>Networks</strong></span>. See, <a class="link" href="https://openvpn.net/cloud-docs/edit-access-group/" target="_blank" rel="noopener">Edit Access Group</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1bd0ed3a-18c2-60d0-4759-84ab89cd9482" data-publication-date="" id="UUID-7841b687-7704-7417-443b-ff29ddaea7f5"><div class="titlepage"><div><div class="title"><h3 class="title"><span class="bold"><strong>Create Group-specific Access Groups</strong></span></h3></div></div></div><p>Now, for each of the new User Groups, Owen needs to create an Access Group to provide web access to the shared subnet it the same work location as the User’s report to. See, <a class="link" href="https://openvpn.net/cloud-docs/provide-access-to-a-specific-service-to-a-user-group/" target="_blank" rel="noopener">Provide access to a specific Service to a User Group</a>. Once done, the Access Groups look like the below. Now due to these Access Groups, telecommuting Users can only access web services from the Network that they would connect to when at work.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-efd4633c-a69a-2234-b257-347ccffa416c.jpg" style="" alt="62ed497e6cb7e.jpg"></img></div></section></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-450e743c-7dc1-2377-4b4b-7b1d372200ff" data-publication-date="" id="UUID-9293c98c-cb8d-b95f-45f5-d11921a05f19"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Privileged Access</strong></span></h2></div></div></div><p>Now that Owen has restricted telecommuters to just the use of web services, he is assured that none of the Users can access any other services while telecommuting. But, Owen would like to access Servers on any of the 3 location’s Networks while telecommuting. Owen frequently needs ssh access to his servers while at work. To get the same access while telecommuting, Owen needs to define new Services and Access Groups.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-ec9831f6-d35a-401d-129f-c59224007c5a.png" style="" alt="62ed497fcdc41.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1c58fd49-8147-56ed-214e-a122c7cb3161" data-publication-date="" id="UUID-384fb1d1-ec41-b860-fc56-45ef22771f89"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Create New Services</strong></span></h2></div></div></div><p>Owen creates a new Service under each Network for SSH and Telnet access to the complete private IP address space of those Networks. See, <a class="link" href="https://openvpn.net/cloud-docs/protocol-specific-service/" target="_blank" rel="noopener">Protocol-specific Service</a> for more details on setting up a Service.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-5c2ba445-0062-d630-6830-1e02432a9be6.jpg" style="" alt="62ed49819190e.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-2d101bab-2a98-fdb0-ece3-b6ba8a51125b" data-publication-date="" id="UUID-dcf9ca15-ca09-b3d1-918b-f33b8bbba25f"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Create a new Access Group</strong></span></h2></div></div></div><p>In the earlier step, Owen had created HQPrivilegeAccess, BrMAPrivilegeAccess, and BrUKPrivelegeAccess as Services. Now, he provides access to these services to the Owner User Group of which he is a member of by creating a new Access Group. For more specifics on creating Access Groups see, <a class="link" href="https://openvpn.net/cloud-docs/add-new-user-group/" target="_blank" rel="noopener">Add New User Group</a>.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-9d672967-9634-5f1c-82e2-b12b7198e9d7.jpg" style="" alt="62ed4982f29d9.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-9b3f5878-3e6d-08fb-c811-3a73e4291619" data-publication-date="" id="UUID-fc9868b1-a164-d0c9-50e3-03ffc6be30ab"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Access Rules in effect</strong></span></h2></div></div></div><p>With the Access Group for privileged access set up, the current access rules that are in effect are shown in the screenshot below.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-3258bd2b-5c0a-e8f0-3140-2d1ddbf75de4.jpg" style="" alt="62ed498479ab7.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-92b51f94-88e1-f79e-6942-b5b75f1a2e62" data-publication-date="" id="UUID-152031f4-b889-b4df-d223-a25a7ca485dc"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Zero Trust</strong></span></h2></div></div></div><p>Owen has been asked to give the highest grade of access security to a particular server on HQ Network which houses financial reporting applications. The financial service should be accessible only to key members of the HQ finance department, of which Henry is a member. Owen decides to implement some of the zero-trust principles for this service. The private corporate Network is not treated as a trusted Network. For access to the service, the User needs to connect to the WPC. This enforces that User identity is authenticated and the Device too is authenticated by use of certificates. If the Device is compromised, the certificate can be revoked. After authentication, only authorized Users are provided access to the application. This strict zero-trust access policy along with additional web application authentication makes for a strong access security model.</p><p>To make the service inaccessible from the branch Networks, Owen deploys the server in a subnet that is different from the shared services subnet. To ensure that other computers on the HQ private Network do not have direct access to the service, Owen adds firewall rules to only allow traffic coming via the Connector computer to communicate with the financial application server.</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-ecc6b1e9-66c9-9846-4492-e410b351d4e7.png" style="" alt="62ed498681b02.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-6e0803a9-ffdf-81f4-69b4-0356626b59d8" data-publication-date="" id="UUID-1c345963-e688-de37-401d-f665d6aea8f7"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Create a new User Group</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-60367a66-1252-ecdc-adce-580aa23fe30e.jpg" style="" alt="62ed4988694ab.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-ff82c1d3-d51c-5db1-7618-f57c9d091ad8" data-publication-date="" id="UUID-6bf16c4f-3bde-c0b7-1928-d07c07dd7d1b"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Assign User to the Group</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-f107cd02-0c22-1ab1-d921-988858469800.jpg" style="" alt="62ed4989f19c6.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-15e8698f-38fe-4427-2562-75114245edad" data-publication-date="" id="UUID-a0966f62-d84a-3071-4225-dd81046a19f6"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Create a Service for the financial web application</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-e609bdb2-ce14-a002-4287-883372bee0af.jpg" style="" alt="62ed498bd1f89.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-57e8452d-4cec-9804-2e37-cdcfe0660ae1" data-publication-date="" id="UUID-6c0bfee8-53b2-0c76-d5a8-c1aeb1a34f57"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Create a new Access Group</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-89fc8071-d443-1fa8-ce94-e2d4c259f2a8.jpg" style="" alt="62ed498d8988c.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-dc6ff2b9-1486-be0a-3b81-b7590fa3f79f" data-publication-date="" id="UUID-d2a91879-0a76-52de-f10a-ad13555c2ed4"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Secure IoT Application</strong></span></h2></div></div></div><p>To conserve energy, the company has decided to upgrade its infrastructure at the Headquarters building to enable building automation. The solution requires that a number of control systems installed in the building communicate with the building automation control server. Owen decides to use AWS to Host the automation control server. Instead of making the complete AWS VPC a Network and using a Site-to-Site networking paradigm, just the Control server can be a part of the WPC by colocating the Connector client on the same server. The steps Owen follows for this solution are:</p><div class="mediaobject"><img src="/cloud-docs/image/uuid-23e20ace-ada5-0e52-4f27-595f74783b9b.png" style="" alt="62ed498f14796.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-893d4e50-6d11-0256-e48f-cd572eec2bb6" data-publication-date="" id="UUID-8862a275-f6b9-cfce-21f8-95fdfad8d502"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Adding a Host</strong></span></h2></div></div></div><p>Owen configures a new Host called IOT-BldgAuto See, <a class="link" href="../../../">Adding a Host</a></p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-e0520e2a-06cd-823b-f9b2-bb74993f568f" data-publication-date="" id="UUID-8de95fa8-5cba-fffb-a7e0-2638f0ede0f7"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Configuring Services</strong></span></h2></div></div></div><p>Owen configures two services, one a web service for the building automation application, and the other for privileged access to the server. See, <a class="link" href="https://openvpn.net/cloud-docs/adding-service-for-a-host/" target="_blank" rel="noopener">Adding Service for a Host</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-d2e28038-6ff1-f369-b443-c269f1611f8f" data-publication-date="" id="UUID-aeb82682-867f-b733-d4be-9b71de5cffc1"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Installing Connector</strong></span></h2></div></div></div><p>Owen downloads the Profile for the Connector configured for the Host and uses that to configure the Connector software on the building automation control server. See, <a class="link" href="https://openvpn.net/cloud-docs/installing-network-connector-linux/" target="_blank" rel="noopener">Installing Network Connector – Linux</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-ed3324e7-6c67-a34c-dc03-af2cc1e26717" data-publication-date="" id="UUID-8ed50df3-5685-86ec-9fd3-cc1549cdffc2"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Adding User Group for IoT</strong></span></h2></div></div></div><p>Owen adds HQIoT as a new User Group. The building automation control systems in the HQ building will belong to this Group. As these systems are unattended and will need to set up the WPC connection without the need for someone to enter username and password, the Authentication Type is selected to use just the Profile (i.e. mutual authentication based on the use of digital certificates). San Jose, CA is the only Region that these Devices are allowed to connect to. Owen intends to use just on User (HQBldgIoT) to represent all the control systems in the HQ building. Each control system will be one Device that belongs to this User. As the number of control systems are many, Owen configures 100 as the number of Devices allowed per User. As these Devices will only communicate with their control server (Host IoT-BldgAuto), Internet Access is Blocked See, <a class="link" href="https://openvpn.net/cloud-docs/customizing-a-user-group/" target="_blank" rel="noopener">Customizing a User Group</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-c25514ac-12dc-e005-0d97-f897bd653dcf" data-publication-date="" id="UUID-03ba119a-b282-7adb-a690-ac0443edc3fc"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Adding a User</strong></span></h2></div></div></div><p>A new User, HQBldgIoT, is created and assigned to HQIoT User Group. See, <a class="link" href="https://openvpn.net/cloud-docs/adding-a-user/" target="_blank" rel="noopener">Adding a User</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-31f70393-b3a2-12e0-bd55-572bfdbd156e" data-publication-date="" id="UUID-4875521a-f0d5-9e8d-ecce-07eef797ac51"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Installing Client and downloading Profile</strong></span></h2></div></div></div><p>The control systems run on Windows operating systems. The steps to download the Connect Client for Windows and connect to San Jose Region are similar to <a class="link" href="https://openvpn.net/cloud-docs/user-downloading-app-getting-profile-and-connecting/" target="_blank" rel="noopener">User downloading app, getting profile and connecting</a>.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-6bc243b7-c0a9-052a-df20-825d5e715473" data-publication-date="" id="UUID-dd327ea1-6047-6b60-15b6-f5d706e09477"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Providing the Control Server Address</strong></span></h2></div></div></div><p>The control systems need to be configured with the IP address of their control server for them to use the IoT web service. As the control server has been configured as a CloudConnexa Host, it can be reached using the WPC address assigned by CloudConnexa to the Host Connector. As seen from the configuration below, the Host has been assigned an IPv4 address of <code class="code">100.64.1.2</code></p><div class="mediaobject"><img src="/cloud-docs/image/uuid-eeb66bc2-cfb1-30ea-a7a0-686e0c45a0bd.png" style="" alt="62ed499214a87.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1bb1bc87-27e2-8983-c95f-387ea02093db" data-publication-date="" id="UUID-d0b22953-64cb-fae6-9585-ad1d762e830f"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Final WPC and configuration</strong></span></h2></div></div></div><p>After all the configuration, the end state for the WPC is achieved.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-b9419a2a-2206-67ac-3c87-8fb19375fe8e" data-publication-date="" id="UUID-be662048-626e-b7b9-6af1-62e1a6f8bb6c"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Final Network Diagram</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-9e6047bd-98ac-0b7b-12ac-30dee1593647.png" style="" alt="62ed4993e5507.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-2d49683d-57e1-8940-a665-105a67301848" data-publication-date="" id="UUID-5a1d0f3d-45ea-38da-abcb-eaadb83f80e0"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Network Settings</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-72c7c3d9-e880-d683-d767-92116a1496e1.png" style="" alt="62ed4995ca1f0.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-fedaa8b8-e9bf-c4c1-5b0d-30d44a8031b3" data-publication-date="" id="UUID-6c2804b9-4b7a-dcdf-cf7d-83af7d5f267e"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>User Settings</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-8a20b0d5-88fd-464b-7fb2-b1bb8c0b0551.png" style="" alt="62ed4997bd90b.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-0e47a64b-b9ca-a596-c2e4-b4b9a450b919" data-publication-date="" id="UUID-c63a0db0-febb-efc4-b48d-79b3f2e20799"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Groups</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-30e5e22f-b959-c4a8-3acd-4818027dd200.png" style="" alt="62ed49999e81d.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1179b83d-8ebf-cffb-1251-0895500b217c" data-publication-date="" id="UUID-818b67df-b536-9487-ce77-212af2f3aba0"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Users</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-88a9769e-2091-7939-9f41-56b0093e89c1.jpg" style="" alt="62ed499b9dcf8.jpg"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-c24a19a5-b941-1248-f086-cf1039eaff22" data-publication-date="" id="UUID-9e3a58a6-6ae3-b2f4-1607-9b403e4bde8f"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Networks</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-cb0d28ec-e066-6447-c0bf-572734771734.png" style="" alt="62ed499d16c29.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-66c6622d-eb70-1f5d-de0d-f84d6b3cf28e" data-publication-date="" id="UUID-d764454c-0d47-909f-3389-54ef70abf87b"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Hosts</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-2785f68c-3946-7d21-8ac7-91a506e2ad8e.png" style="" alt="62ed499ecde3e.png"></img></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-60b168a0-6fa2-ca82-1026-048d52da2d02" data-publication-date="" id="UUID-0564cafe-f0d3-4eae-e416-809df618f498"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Access</strong></span></h2></div></div></div><div class="mediaobject"><img src="/cloud-docs/image/uuid-4805e2dd-e523-3815-1066-464d61c58344.png" style="" alt="62ed49a09b87d.png"></img></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-0804849f-9647-906b-660a-29be1762517f">User Guide - Configuring a WPC that meets a variety of needs</a></li><li><a href="#UUID-4a3f0375-ff00-26c4-be6f-4846650d270c">Overview</a></li><li><a href="#UUID-9178e675-d391-c440-0063-351f23e8e3c7">Site-to-Site Networking</a></li><li><a href="#UUID-8ff4a8db-5e54-2f89-3a38-7a8e5cdc3750">Sign in to the CloudConnexa Administration portal and configure the HQ Network</a></li><li><a href="#UUID-5e291615-089b-a05c-33fa-76c2bd53fb25">Setup the other two Networks</a></li><li><a href="#UUID-3f017344-9cde-4a52-c2e1-3a8665cfb0c1">Check that access is set to Full-Mesh</a></li><li><a href="#UUID-b5c7ee2b-44c7-c694-b1d3-318f479a4d92">Install Connector software and connect to CloudConnexa</a></li><li><a href="#UUID-c460a51c-1f5e-6efc-6b5e-0937ec6ad905">Configure the Network routes at each of the sites</a></li><li><a href="#UUID-de6449fb-f801-9799-a6df-84f2489b0e25">Remote Workers / Telecommuting</a></li><li><a href="#UUID-c357d6aa-24c6-f4eb-8369-8af95c0a30dd">Check and edit the Default User Group settings</a></li><li><a href="#UUID-ef157330-5cec-f7aa-58c8-118cdaa59417">Choose the means of Profile distribution</a></li><li><a href="#UUID-71e86295-580d-e7de-fb97-04a15429ae21">Add Users Harry and Mary</a></li><li><a href="#UUID-84c1f843-abd7-eefd-9b3c-57e06d114adf">User Harry joins CloudConnexa</a></li><li><a href="#UUID-37061586-99af-79f6-eb97-976f1723d629">User Harry gets Profile and connects</a></li><li><a href="#UUID-e670eb64-a396-b8a4-e856-6af7e9072a67">Owen Checks that Harry has got his Profile</a></li><li><a href="#UUID-211a17df-4692-fffb-91af-c5163d41bec4">Internet Security and Policies</a></li><li><a href="#UUID-1b178ca6-e518-9138-f0e1-93982319dddb">Add an Internet Gateway to the HQ Networks</a></li><li><a href="#UUID-b98a5169-002e-454a-ae71-d54e2a51fdff">Configure the computer with the Connector as an Internet Gateway</a></li><li><a href="#UUID-e4c37881-2f78-7804-a07e-9a5e95c81f2b">Make changes to Internet Access for Networks</a></li><li><a href="#UUID-a916abe5-7313-b446-ec04-d22253bad46d">Add Default Routes at the Branch Networks</a></li><li><a href="#UUID-d359ef5d-d559-bef2-e7cf-4cddc7494e9c">Make changes to Internet Access for User Groups</a></li><li><a href="#UUID-6e1baa7c-2f91-4692-31db-c33df84cca98">SaaS Whitelisting</a></li><li><a href="#UUID-ea93b139-7a5e-2cf7-664e-400e0508b2d9">Access Controls</a></li><li><a href="#UUID-edd454a5-8d5b-7d2b-e266-7170f73f4b62">Inter-site Access Controls</a><ul class="nav"><li><a href="#UUID-6b5c6fb3-a4f9-a1b5-2f1b-59a015b5bdbd">Configures services for all three Networks</a></li><li><a href="#UUID-299fb20d-69ee-091b-f7fe-96854079b3fa">Add Access Control Group</a></li><li><a href="#UUID-e0100cfa-3a74-c011-9eed-6980a0423778">Switch to use of Custom WPC Topology</a></li></ul></li><li><a href="#UUID-a1b3d3f1-3436-fa11-8a74-83b5b393d9a7">User Group Application Access Controls</a><ul class="nav"><li><a href="#UUID-0e2db80d-2ca5-4f64-b1e6-bee355aeeef6">Create New web-specific Service</a></li><li><a href="#UUID-9c20f228-7a5b-8a7f-4b1e-fff8ce6c7843">Create new User Groups</a></li><li><a href="#UUID-551c33b1-6195-2169-5cc6-b590614fec3a">Assign Users to appropriate Groups</a></li><li><a href="#UUID-66bd146e-6887-ccc9-142c-012291bbbbb3">Alter existing Access Groups</a></li><li><a href="#UUID-7841b687-7704-7417-443b-ff29ddaea7f5">Create Group-specific Access Groups</a></li></ul></li><li><a href="#UUID-9293c98c-cb8d-b95f-45f5-d11921a05f19">Privileged Access</a></li><li><a href="#UUID-384fb1d1-ec41-b860-fc56-45ef22771f89">Create New Services</a></li><li><a href="#UUID-dcf9ca15-ca09-b3d1-918b-f33b8bbba25f">Create a new Access Group</a></li><li><a href="#UUID-fc9868b1-a164-d0c9-50e3-03ffc6be30ab">Access Rules in effect</a></li><li><a href="#UUID-152031f4-b889-b4df-d223-a25a7ca485dc">Zero Trust</a></li><li><a href="#UUID-1c345963-e688-de37-401d-f665d6aea8f7">Create a new User Group</a></li><li><a href="#UUID-6bf16c4f-3bde-c0b7-1928-d07c07dd7d1b">Assign User to the Group</a></li><li><a href="#UUID-a0966f62-d84a-3071-4225-dd81046a19f6">Create a Service for the financial web application</a></li><li><a href="#UUID-6c0bfee8-53b2-0c76-d5a8-c1aeb1a34f57">Create a new Access Group</a></li><li><a href="#UUID-d2a91879-0a76-52de-f10a-ad13555c2ed4">Secure IoT Application</a></li><li><a href="#UUID-8862a275-f6b9-cfce-21f8-95fdfad8d502">Adding a Host</a></li><li><a href="#UUID-8de95fa8-5cba-fffb-a7e0-2638f0ede0f7">Configuring Services</a></li><li><a href="#UUID-aeb82682-867f-b733-d4be-9b71de5cffc1">Installing Connector</a></li><li><a href="#UUID-8ed50df3-5685-86ec-9fd3-cc1549cdffc2">Adding User Group for IoT</a></li><li><a href="#UUID-03ba119a-b282-7adb-a690-ac0443edc3fc">Adding a User</a></li><li><a href="#UUID-4875521a-f0d5-9e8d-ecce-07eef797ac51">Installing Client and downloading Profile</a></li><li><a href="#UUID-dd327ea1-6047-6b60-15b6-f5d706e09477">Providing the Control Server Address</a></li><li><a href="#UUID-d0b22953-64cb-fae6-9585-ad1d762e830f">Final WPC and configuration</a></li><li><a href="#UUID-be662048-626e-b7b9-6af1-62e1a6f8bb6c">Final Network Diagram</a></li><li><a href="#UUID-5a1d0f3d-45ea-38da-abcb-eaadb83f80e0">Network Settings</a></li><li><a href="#UUID-6c2804b9-4b7a-dcdf-cf7d-83af7d5f267e">User Settings</a></li><li><a href="#UUID-c63a0db0-febb-efc4-b48d-79b3f2e20799">Groups</a></li><li><a href="#UUID-818b67df-b536-9487-ce77-212af2f3aba0">Users</a></li><li><a href="#UUID-9e3a58a6-6ae3-b2f4-1607-9b403e4bde8f">Networks</a></li><li><a href="#UUID-d764454c-0d47-909f-3389-54ef70abf87b">Hosts</a></li><li><a href="#UUID-0564cafe-f0d3-4eae-e416-809df618f498">Access</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="wide-area-private-cloud--wpc-.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="split-tunnel.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023  </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><script type="text/javascript">
var theme = '0';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><script src="/cloud-docs/js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="/cloud-docs/js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="/cloud-docs/js/materialize.min.js" type="text/javascript"></script><script src="/cloud-docs/js/bootstrap.min.js" type="text/javascript"></script><script src="/cloud-docs/js/purl.js" type="text/javascript"></script><script src="/cloud-docs/js/jquery.smartmenus.js" type="text/javascript"></script><script src="/cloud-docs/owner/js/toc.js" type="text/javascript"></script><script src="/cloud-docs/js/create-toc.js" type="text/javascript"></script><script src="/cloud-docs/js/html5-2-mp-common.js" type="text/javascript"></script><script src="/cloud-docs/js/html5-2.js" type="text/javascript"></script><script src="/cloud-docs/js/checklist.js" type="text/javascript"></script><script src="/cloud-docs/js/clipboard.min.js" type="text/javascript"></script><script src="/cloud-docs/js/anchorlinks.js" type="text/javascript"></script><script src="/cloud-docs/js/html5.algoliasearch.js" type="text/javascript"></script><script src="/cloud-docs/js/csh.js" type="text/javascript"></script><script src="/cloud-docs/js/layout-custom-script.js" type="text/javascript"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script type="text/javascript">const containerId = 'GTM-W3DL2JV';

						$(document).on('cookies.consented', () => {
							(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
								new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
								j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
								'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
							})(window,document,'script','dataLayer',containerId);
						});
					</script><script type="text/javascript" src="/cloud-docs/js/cookie-consent.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><script type="text/javascript">var publication_id = 'docs_index';
var algolia_application_id = 'RSWCYN6WCZ';
var algolia_search_only_api_key = '62cb66cce7985fc867c172fa2d12bc1c';
</script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W3DL2JV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
