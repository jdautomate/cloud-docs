<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="algolia"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="0"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><title>User Guide - WPC with multiple WPC Egress locations</title><link rel="stylesheet" type="text/css" href="/cloud-docs/css/docbook.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/theme0.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/theme0-colors.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-print.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-common.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/html5.algoliasearch.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/cloud-docs/css/layout-custom-style.css"></link><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="keywords" content="CloudConnexa formerly known as OpenVPN Cloud, CloudConnexa Administrator"></meta><link rel="prev" href="adding-a-network.html" title="Adding a Network"></link><link rel="next" href="secure-internet-access-admin-guide.html" title="Secure Internet Access Admin Guide"></link><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link></head><body class="theme0 page-toc collapsible-sidebar-nav current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix="../../../"><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="/cloud-docs/css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="collapse" id="navbar-collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/cloud-docs/index.html" target="_blank" rel="noopener"><img id="logotype-pageheader" src="/cloud-docs/css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar top-nav-on"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"><ul class="version-menu sm sm-simple"><li class="version-dropdown"><a><span class="caret"></span>Select version</a><ul class="version-dropdown"><li><a href="/cloud-docs/owner/index.html">Owner Documentation</a></li><li><a href="/cloud-docs/administrator/index.html">Admin Documentation</a></li><li><a href="/cloud-docs/user/index.html">User Documentation</a></li><li><a href="/cloud-docs/developer/index.html">Developer Documentation</a></li></ul></li></ul></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="../../../index-en.html">Knowledge Base</a></li><li class="breadcrumb-link"><a href="../../../administrator.html"><span class="bold"><strong>Administrator</strong></span></a></li><li class="breadcrumb-link"><a href="../../networks-and-gateways.html"><span class="bold"><strong>Networks and Gateways</strong></span></a></li><li class="breadcrumb-link"><a href="../internet-gateway.html"><span class="bold"><strong>Internet Gateway</strong></span></a></li><li class="breadcrumb-node">User Guide - WPC with multiple WPC Egress locations</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="adding-a-network.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="secure-internet-access-admin-guide.html">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section reused-publication" data-origin-id="UUID-4d79af75-8326-7b2c-d2ea-18be193da90e" data-permalink="administrator/networks-and-gateways/internet-gateway/user-guide---wpc-with-multiple-wpc-egress-locations.html" data-topic-level="4" data-relative-prefix="../../../" data-publication-date="" id="UUID-4d79af75-8326-7b2c-d2ea-18be193da90e"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">User Guide - WPC with multiple WPC Egress locations</h1></div></div></div><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-037075b7-b5f6-caa6-a7e2-bf69d0b6f292" data-publication-date="" id="UUID-8e53803f-cbc9-8a2d-59ac-0364446e511b"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both"><span class="bold"><strong>Overview</strong></span></h2></div></div></div><p>In this document, we examine a WPC set up to meet the needs of a fictitious company. A startup has a sales team in the USA and Europe. Their sales force is often at customer sites or traveling to customer sites. They access the Internet from hotels, cafes, airports, and other public Internet sites. The sales team relies on SaaS tools like Salesforce.</p><p>Owen is in charge of IT and Networking for this company. Owen is cognizant of the security risks that come with the use of public hotspots to access the Internet and is looking for a WPC solution that the sales team can use for secure access to the Internet. He does not want to manage, install and maintain WPC servers but wants to ensure that the company has control over the route to the Internet so that additional protections (for example, use of CASB) can be added later. The public IP address of the internet gateways can also be used in configuring login whitelists in some SaaS providers.</p><p>To improve internet access performance, Owen wants to route internet traffic via the Chicago Region for employees that connect in the USA. To improve internet access performance, Owen wants to route internet traffic via the London Region for employees that connect in Europe. This optimized routing will automatically be taken care of by the smart routing feature of CloudConnexa.</p><p>Owen completes the signup process as shown <a class="link" href="https://openvpn.net/cloud-docs/owner-signup/" target="_blank" rel="noopener">here</a>. During the signup process, Owen selects technop.openvpn.cloud as the web domain for the User portal. This domain uniquely identifies the WPC that will be set up by Owen and is used by Connect Client applications (WPC Client software) to identify the WPC that it needs to connect to.</p></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-30a4a598-9809-327b-0c8b-7b283b67533d" data-publication-date="" id="UUID-9f25dc4c-494c-6103-b785-4c47fddf7c53"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Setup</h2></div></div></div><p>To route traffic that has entered the WPC to destinations on the Internet, Owen needs to set up one or more Networks configured with <span class="bold"><strong>Internet Gateway</strong></span> turned <span class="bold"><strong>ON</strong></span>. Each Network configured for Internet Gateway can have one or more Connectors. CloudConnexa will use Smart Routing to route internet traffic from Networks, Hosts, and User Groups that have their <span class="bold"><strong>Internet Access</strong></span> set to <span class="bold"><strong>Split-Tunnel OFF</strong></span> to one of the Connectors belonging to Internet Gateway Networks based on:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The geographic proximity of the Region that is the source of the traffic to the Region of the Internet Gateway Network’s Connector</p></li><li class="listitem"><p>Network characteristics of the connectivity between source and destination Regions</p></li><li class="listitem"><p>Load balancing is used when multiple destination Connectors are connected to the same Region</p></li></ul></div><p>Owen followed the steps shown below to set up his WPC to accept traffic to the Internet and route it to the Internet via two Networks configured as Internet Gateway:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Configured two Networks to act as Internet Gateway. As these Network’s sole purpose is to act as an internet gateway, <span class="emphasis"><em>Subnets</em></span> for the Network was not added and <span class="bold"><strong>Internet Gateway</strong></span> was turned <span class="bold"><strong>ON</strong></span>. He set the <span class="bold"><strong>Region</strong></span> of the Connector for one of the Networks as Chicago and the other Network as London. See, <a class="link" href="https://openvpn.net/cloud-docs/adding-a-network/" target="_blank" rel="noopener">How to add a Network</a> and <a class="link" href="https://openvpn.net/cloud-docs/adding-vpn-egress/" target="_blank" rel="noopener">Adding Internet Gateway</a></p></li><li class="listitem"><p>Owen decided to run a server using a Virtual Private Server (VPS) hosting provider that had a hosting region near Chicago. He installed the Connector for the Chicago Network on it and configured the server to act as the Internet Gateway. The server was assigned a public IP address of <code class="code">104.248.61.65</code>. See, <a class="link" href="https://openvpn.net/cloud-docs/connecting-networks-to-openvpn-cloud-using-connectors/" target="_blank" rel="noopener">Connecting Networks to CloudConnexa Using Connectors</a> on how to install Connectors and the corresponding settings to enable routing and NAT. We recommend using Linux operating system.</p></li><li class="listitem"><p>Owen decided to run a server using a Virtual Private Server (VPS) hosting provider that had a hosting region near London. He installed the Connector for the London Network on it and configured the server to act as the Internet Gateway. The server was assigned a public IP address of <code class="code">167.71.139.124</code> See, <a class="link" href="https://openvpn.net/cloud-docs/connecting-networks-to-openvpn-cloud-using-connectors/" target="_blank" rel="noopener">Connecting Networks to CloudConnexa Using Connectors</a> on how to install Connectors and the corresponding settings to enable routing and NAT. We recommend using Linux operating system.</p></li><li class="listitem"><p>After the Network came online, Owen changed the <span class="bold"><strong>Internet Access</strong></span> setting for User Groups to <span class="bold"><strong>Split-Tunnel OFF</strong></span>. See,<a class="link" href="https://openvpn.net/cloud-docs/changing-user-groups-internet-access-to-use-internet-gateway/" target="_blank" rel="noopener">Changing User Group’s Internet Access</a></p></li><li class="listitem"><p>Owen connected to the Ashburn, Virginia Region of CloudConnexa (see, <a class="link" href="https://openvpn.net/cloud-docs/user-downloading-app-getting-profile-and-connecting/" target="_blank" rel="noopener">Connecting to CloudConnexa</a>). On connection, Owen checked that the public IP address of his Device running the Connect Client showed up to be the same as the public IP address of the Chicago Connector instance proving that smart routing is working.</p></li><li class="listitem"><p>Owen connected to the Frankfurt Region of CloudConnexa (see, <a class="link" href="https://openvpn.net/cloud-docs/user-downloading-app-getting-profile-and-connecting/" target="_blank" rel="noopener">Connecting to CloudConnexa</a>). On connection, Owen checked that the public IP address of his Device running the Connect Client showed up to be the same as the public IP address of the London Connector instance proving that smart routing is working.</p></li></ol></div></section><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-1dbcdccf-8e7e-e240-a1ac-2703d1f061b7" data-publication-date="" id="UUID-0812daec-b2cb-0487-7852-18dcf21dca45"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Demonstration Video</h2></div></div></div><p>This WPC has two Networks configured for Internet Gateway. One Network has a Connector connected to London Region. The Connector is configured to NAT and has the public IP address of <code class="code">167.71.139.124</code>. All traffic exiting from this Connector will have IP address <code class="code">167.71.139.124</code> as the source IP address</p><p>The other Network has a Connector connected to Chicago Region. The Connector is configured to NAT and has the public IP address of <code class="code">104.248.61.65</code>. All traffic exiting from this Connector will have IP address 104.248.61.65 as the source IP address</p><p>User Connects to Ashburn, Virginia Region and accesses a test web server running on the internet. The web server log will show access coming from public IP address of Chicago Connector (<code class="code">104.248.61.65</code>)</p><p>User Connects to Frankfurt Region and accesses a test web server running on the internet. The web server log will show access coming from public IP address of London Connector (<code class="code">167.71.139.124</code>)</p><div class="mediaobject"><div class="video-container"><div class="videoobject"><iframe style="border:0;" allow="fullscreen *" src="https://player.vimeo.com/video/769591232"></iframe></div></div></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-4d79af75-8326-7b2c-d2ea-18be193da90e">User Guide - WPC with multiple WPC Egress locations</a></li><li><a href="#UUID-8e53803f-cbc9-8a2d-59ac-0364446e511b">Overview</a></li><li><a href="#UUID-9f25dc4c-494c-6103-b785-4c47fddf7c53">Setup</a></li><li><a href="#UUID-0812daec-b2cb-0487-7852-18dcf21dca45">Demonstration Video</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article><div class="feedback-panel"><div class="voting-title">Was this helpful?</div><div class="btn-group btn-group-toggle" data-toggle="buttons"><button id="feedback-yes-btn" class="btn toggle-yes">Yes</button><button id="feedback-no-btn" class="btn">No</button></div></div></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="adding-a-network.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="secure-internet-access-admin-guide.html">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023  </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div><script type="text/javascript">
var theme = '0';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
				useanchorlinks = true;
				
				var clicktocopy = 'Click to copy link';
				var linkcopied =  'Copied!';</script><script src="/cloud-docs/js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="/cloud-docs/js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="/cloud-docs/js/materialize.min.js" type="text/javascript"></script><script src="/cloud-docs/js/bootstrap.min.js" type="text/javascript"></script><script src="/cloud-docs/js/purl.js" type="text/javascript"></script><script src="/cloud-docs/js/jquery.smartmenus.js" type="text/javascript"></script><script src="/cloud-docs/administrator/js/toc.js" type="text/javascript"></script><script src="/cloud-docs/js/create-toc.js" type="text/javascript"></script><script src="/cloud-docs/js/html5-2-mp-common.js" type="text/javascript"></script><script src="/cloud-docs/js/html5-2.js" type="text/javascript"></script><script src="/cloud-docs/js/checklist.js" type="text/javascript"></script><script src="/cloud-docs/js/clipboard.min.js" type="text/javascript"></script><script src="/cloud-docs/js/anchorlinks.js" type="text/javascript"></script><script src="/cloud-docs/js/html5.algoliasearch.js" type="text/javascript"></script><script src="/cloud-docs/js/csh.js" type="text/javascript"></script><script src="/cloud-docs/js/layout-custom-script.js" type="text/javascript"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><script type="text/javascript">const containerId = 'GTM-W3DL2JV';

						$(document).on('cookies.consented', () => {
							(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
								new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
								j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
								'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
							})(window,document,'script','dataLayer',containerId);
						});
					</script><script type="text/javascript" src="/cloud-docs/js/cookie-consent.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><script type="text/javascript">var publication_id = 'docs_index';
var algolia_application_id = 'RSWCYN6WCZ';
var algolia_search_only_api_key = '62cb66cce7985fc867c172fa2d12bc1c';
</script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script><!--Google Tag Manager (noscript)--><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W3DL2JV" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><!--End Google Tag Manager (noscript)--></body></html>
